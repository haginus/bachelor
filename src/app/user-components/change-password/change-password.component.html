<app-loading *ngIf="userEmail == null" type="spinner"></app-loading>

<div class="flex-container align-center v-align-center fullscreen">
    <div class="login-container mat-elevation-z2">
        <app-loading *ngIf="loading"></app-loading>
        <div class="image-container flex-container align-center logo">
            <img src="assets/img/fmi-logo.png"/>
        </div>
        <h2>Schimbați parola</h2>
        <form [formGroup]="changePasswordForm">
            <input type="email" name="email" [value]="userEmail" style="display: none;" />
            <mat-form-field appearance="outline" *ngIf="mode == 'normal'">
                <mat-label>Parolă curentă</mat-label>
                <input matInput type="password" formControlName="currentPassword">
                <mat-error>Parola trebuie să conțină minimum 6 caractere.</mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Parolă nouă</mat-label>
                <input matInput type="password" formControlName="password" [errorStateMatcher]="matcher">
                <mat-error>Parola trebuie să conțină minimum 6 caractere.</mat-error>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Confirmați parola</mat-label>
                <input matInput type="password" formControlName="confirmPassword" [errorStateMatcher]="matcher">
                <mat-error *ngIf="changePasswordForm.errors?.passwordsNotMatched">Parolele nu se potrivesc!</mat-error>
            </mat-form-field>
            <div class="flex-container align-center">
                <button mat-raised-button color="accent" [disabled]="changePasswordForm.invalid || loading" (click)="changePassword()">Schimbați parola</button>
            </div>
        </form>
    </div>
</div>